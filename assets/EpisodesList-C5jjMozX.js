import{r as n,a as D,u as W,g as H,d as I,j as s,S as A,W as y,X as E}from"./index-CKmD69P3.js";import{u as R}from"./index-C0wSlaAT.js";const T="_episodesList_7ieb7_1",U="_episode_7ieb7_1",$="_episodeActive_7ieb7_5",O="_previewWrapper_7ieb7_28",P="_name_7ieb7_45",X="_loader_7ieb7_56",q="_header_7ieb7_62",z="_sortButton_7ieb7_75",F="_search_7ieb7_95",o={episodesList:T,episode:U,episodeActive:$,previewWrapper:O,name:P,loader:X,header:q,sortButton:z,search:F},G=t=>n.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M13 12H21M13 8H21M13 16H21M6 7V17M6 7L3 10M6 7L9 10",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),J=t=>n.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function Y({currentEpisode:t,isShowEpisodes:_}){const{episodes:i,isSort:x}=D(e=>e.title),[r,f]=n.useState(i),g=W(),{ref:w,inView:l}=R({threshold:.5});let h=n.useRef();const u=n.useRef(),p=H(),j=I(),k=Math.ceil((i==null?void 0:i.length)-(t==null?void 0:t.ordinal)),[a,b]=n.useState(_?[0,k+5]:[0,10]),[m,S]=n.useState(t==null?void 0:t.ordinal),[c,L]=n.useState("");n.useEffect(()=>{l&&a[1]<=(i==null?void 0:i.length)&&b([a[0],a[1]+10])},[l]),n.useEffect(()=>{var e;(e=h.current)==null||e.scrollIntoView({behavior:"smooth",block:"center"})},[m]),n.useEffect(()=>{const e=setTimeout(()=>{f(M(c,i))},300);return()=>clearTimeout(e)},[c]);function M(e,d){return e?d.filter(B=>B.ordinal.toString().includes(e)):d}const N=e=>{p(y(e.hls_720)),j(`/player/${g.id}/${e.id}`),S(e.ordinal)},v=()=>{p(E())},C=e=>{e.target.value<i.length&&e.target.value>=0&&L(e.target.value)},V=()=>{var e;(e=u.current)==null||e.scrollIntoView({behavior:"smooth",block:"start"})};return s.jsxs("div",{ref:u,className:o.episodesList,children:[s.jsxs("div",{className:o.header,children:[x?s.jsx(G,{className:o.sortButton,onClick:v}):s.jsx(J,{onClick:v,className:o.sortButton}),s.jsx("div",{className:o.search,children:s.jsx("input",{type:"number",onChange:e=>C(e),value:c})}),s.jsx("button",{onClick:V,children:"В начало"})]}),r==null?void 0:r.slice(a[0],a[1]).map((e,d)=>s.jsxs("div",{ref:m===e.ordinal?h:null,className:(t==null?void 0:t.ordinal)===e.ordinal?o.episodeActive:o.episode,onClick:()=>N(e),children:[s.jsx("div",{className:o.previewWrapper,children:s.jsx("span",{children:new Date(e.duration*1e3).toISOString().substr(14,5)})}),s.jsxs("div",{className:o.title,children:[s.jsxs("p",{className:o.number,children:[e.ordinal,". Эпизод"]}),s.jsx("p",{className:o.name,children:e.name})]})]},e.id)),s.jsx("div",{className:o.loader,children:!l&&s.jsx(A,{})}),s.jsx("div",{ref:w})]})}export{Y as E};
