import{r as s,a as I,u as W,e as A,h as y,d as E,j as t,S as R,X as T,Y as U}from"./index-BU_Pne4S.js";const $="_episodesList_7ieb7_1",O="_episode_7ieb7_1",P="_episodeActive_7ieb7_5",X="_previewWrapper_7ieb7_28",Y="_name_7ieb7_45",q="_loader_7ieb7_56",z="_header_7ieb7_62",F="_sortButton_7ieb7_75",G="_search_7ieb7_95",o={episodesList:$,episode:O,episodeActive:P,previewWrapper:X,name:Y,loader:q,header:z,sortButton:F,search:G},J=n=>s.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},s.createElement("path",{d:"M13 12H21M13 8H21M13 16H21M6 7V17M6 7L3 10M6 7L9 10",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),K=n=>s.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},s.createElement("path",{d:"M13 12H21M13 8H21M13 16H21M6 7V17M6 17L3 14M6 17L9 14",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function Z({currentEpisode:n,isShowEpisodes:m}){const{episodes:i,isSort:h}=I(e=>e.title),[c,v]=s.useState(i),k=W(),{ref:b,inView:u}=A({threshold:.5});let f=s.useRef();const _=s.useRef(),x=y(),S=E(),L=Math.ceil((i==null?void 0:i.length)-(n==null?void 0:n.ordinal)),[r,M]=s.useState(m?[0,L+5]:[0,10]),[g,N]=s.useState(n==null?void 0:n.ordinal),[d,C]=s.useState("");s.useEffect(()=>{u&&r[1]<=(i==null?void 0:i.length)&&M([r[0],r[1]+10])},[u]),s.useEffect(()=>{var e;(e=f.current)==null||e.scrollIntoView({behavior:"smooth",block:"center"})},[g]),s.useEffect(()=>{const e=setTimeout(()=>{v(D(d,i)),d.length>0&&j()},300);return()=>clearTimeout(e)},[d]),s.useEffect(()=>{v(V(h,c))},[h]);function D(e,a){return e?a.filter(l=>l.ordinal.toString().includes(e)):a}function V(e,a){return e?[...a].sort((l,p)=>l.ordinal-p.ordinal):[...a].sort((l,p)=>p.ordinal-l.ordinal)}const B=e=>{x(T(e.hls_720)),S(`/player/${k.id}/${e.id}`),N(e.ordinal)},w=()=>{x(U())},H=e=>{e.target.value<i.length&&e.target.value>=0&&C(e.target.value)},j=()=>{var e;(e=_.current)==null||e.scrollIntoView({behavior:"smooth",block:"start"})};return t.jsxs("div",{ref:_,className:o.episodesList,children:[t.jsxs("div",{className:o.header,children:[h?t.jsx(J,{className:o.sortButton,onClick:w}):t.jsx(K,{onClick:w,className:o.sortButton}),t.jsx("div",{className:o.search,children:t.jsx("input",{type:"number",onChange:e=>H(e),value:d})}),m&&t.jsx("button",{onClick:j,children:"В начало"})]}),c==null?void 0:c.slice(r[0],r[1]).map((e,a)=>t.jsxs("div",{ref:g===e.ordinal?f:null,className:(n==null?void 0:n.ordinal)===e.ordinal?o.episodeActive:o.episode,onClick:()=>B(e),children:[t.jsx("div",{className:o.previewWrapper,children:t.jsx("span",{children:new Date(e.duration*1e3).toISOString().substr(14,5)})}),t.jsxs("div",{className:o.title,children:[t.jsxs("p",{className:o.number,children:[e.ordinal,". Эпизод"]}),t.jsx("p",{className:o.name,children:e.name})]})]},e.id)),t.jsx("div",{className:o.loader,children:!u&&t.jsx(R,{})}),t.jsx("div",{ref:b})]})}export{Z as E};
