import{l as E,m as S,k as y,r as o,a as w,j as e,c as j,n as D,b,u as A,o as T,s as $,B as M}from"./index-B_PAhCEP.js";import{G}from"./GridList-CAVnLb-l.js";const k=E({name:"title",initialState:{title:{}},reducers:{setTitleDescription:(s,n)=>{s.title=n.payload}}}),{actions:P}=k,{reducer:me}=k,L=S.injectEndpoints({endpoints:s=>({getTitle:s.query({query:n=>`title?id=${n}&playlist_type=array`,async onQueryStarted(n,{dispatch:i,queryFulfilled:l}){const a=await l,r=a.data,h=a.data.player.list,_=a.data.player.host;i(y.setEpisodesList(h)),i(y.setHost(_)),i(P.setTitleDescription(r))}})})}),pe=L.useGetTitleQuery,he=L.useLazyGetTitleQuery,C="_titleDescription_1cxdc_1",B="_poster_1cxdc_13",R="_info_1cxdc_17",V="_names_1cxdc_23",z="_nameEng_1cxdc_28",H="_infoItemList_1cxdc_32",Q="_infoList_1cxdc_37",q="_infoItem_1cxdc_32",W="_key_1cxdc_41",F="_value_1cxdc_44",t={titleDescription:C,poster:B,info:R,names:V,nameEng:z,infoItemList:H,infoList:Q,infoItem:q,key:W,value:F},J=s=>{var n;return((n=s==null?void 0:s.title)==null?void 0:n.title)||{}},xe=o.memo(()=>{var n,i,l,a,r,h,_,f,c,d,m,x;const s=w(J);return e.jsxs("section",{className:j(t.titleDescription,{},[]),children:[e.jsx("div",{className:t.poster,children:e.jsx("img",{src:`https://anilibria.wtf${s==null?void 0:s.posters.small.url}`,alt:""})}),e.jsxs("div",{className:t.info,children:[e.jsxs("div",{className:t.names,children:[e.jsx("h1",{className:t.nameRu,children:s.names.ru}),e.jsx("p",{className:t.nameEng,children:s.names.en})]}),e.jsxs("div",{className:t.badges,children:[e.jsx("div",{className:t.age}),e.jsx("div",{className:t.day})]}),e.jsxs("dl",{className:t.infoList,children:[e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Статус: "}),e.jsx("dd",{className:t.value,children:(n=s.status)==null?void 0:n.string})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Тип: "}),e.jsx("dd",{className:t.value,children:(i=s.type)==null?void 0:i.string})]}),s.type.length&&e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Длительность: "}),e.jsxs("dd",{className:t.value,children:["~ ",(l=s.type)==null?void 0:l.length," мин."," ",s.type.string==="WEB"&&"серия"]})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Эпизоды: "}),e.jsxs("dd",{className:t.value,children:[(r=(a=s.player)==null?void 0:a.episodes)==null?void 0:r.last," ",((h=s.type)==null?void 0:h.episodes)&&"/ "+((_=s.type)==null?void 0:_.episodes)]})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Жанр: "}),e.jsx("div",{className:t.infoItemList,children:(f=s.genres)==null?void 0:f.map((p,I,u)=>e.jsx("dd",{className:t.value,children:u[u.length-1]===p?p:p+","},p))})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Сезон: "}),e.jsx("dd",{className:t.value,children:(c=s.season)==null?void 0:c.string})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Год: "}),e.jsx("dd",{className:t.value,children:(d=s.season)==null?void 0:d.year})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("dt",{className:t.key,children:"Озвучка: "}),e.jsx("div",{className:t.infoItemList,children:(x=(m=s.team)==null?void 0:m.voice)==null?void 0:x.map((p,I,u)=>e.jsx("dd",{className:t.value,children:u[u.length-1]===p?p:p+","},p))})]})]}),e.jsx(D,{item:s})]})]})}),K="_episodes_6a9mm_1",O="_filter_6a9mm_11",U="_rotate_6a9mm_17",g={episodes:K,filter:O,rotate:U},X="_episodesList_5852b_1",N={episodesList:X},Y="_episodesPreview_1ec8w_1",Z="_preview_1ec8w_5",ee="_info_1ec8w_40",se="_isActive_1ec8w_49",te="_list_1ec8w_60",ie="_name_1ec8w_86",v={episodesPreview:Y,preview:Z,info:ee,isActive:se,list:te,name:ie},ne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cg%20fill='none'%20stroke='%23000000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='4'%3e%3cpath%20d='M10%2044h28a2%202%200%200%200%202-2V14H30V4H10a2%202%200%200%200-2%202v36a2%202%200%200%200%202%202M30%204l10%2010'/%3e%3ccircle%20cx='18'%20cy='17'%20r='4'/%3e%3cpath%20d='M15%2028v9h18V21l-9.51%2010.5z'/%3e%3c/g%3e%3c/svg%3e",ae=o.memo(({episode:s,type:n})=>{const i=b(),l=A(),a=o.useRef();return o.useEffect(()=>{var r;(r=a==null?void 0:a.current)==null||r.scrollIntoView({behavior:"smooth"})},[]),e.jsx("div",{ref:+l.number===s.episode?a:null,onClick:()=>i(`/title/${l.id}/episode/${s.episode}`),className:j(v.episodesPreview,{},[+l.number===s.episode&&v.isActive,v[n]]),children:e.jsxs("div",{className:v.preview,children:[e.jsx("img",{src:s.preview?`${T}${s.preview}`:ne,alt:s.episode}),e.jsxs("div",{className:v.info,children:[e.jsxs("h2",{children:[s.episode," эпизод"]}),n==="list"&&e.jsx("div",{className:v.name,children:s.name})]})]})})}),ce=o.memo(({cls:s,episodes:n,type:i})=>e.jsx("section",{className:j(N.episodesList,{},[N[s]]),children:e.jsx(G,{cls:N.grid,columns:"five",type:i,children:n==null?void 0:n.map(l=>e.jsx(ae,{episode:l,type:i},l.episode))})})),oe=s=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",...s},o.createElement("path",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M23 8h20M14 41l-8-8m8-26v34m9-23h16M23 28h12M23 38h8"})),le=o.memo(({cls:s})=>e.jsx(oe,{className:j($.icon,{},[s])})),_e=o.memo(({cls:s,type:n})=>{const i=w(c=>{var d,m,x;return(x=(m=(d=c==null?void 0:c.title)==null?void 0:d.title)==null?void 0:m.player)==null?void 0:x.list}),[l,a]=o.useState();console.log(i);const[r,h]=o.useState("old");o.useEffect(()=>{i&&a([...i].sort((c,d)=>d.episode-c.episode))},[i]);const _=o.useCallback(()=>{r==="new"&&(a([...i].sort((c,d)=>d.episode-c.episode)),h("old")),r==="old"&&(a([...i].sort((c,d)=>c.episode-d.episode)),h("new"))},[r,i]),f=o.useCallback(c=>{let d=c.target.value;c.target.value===""?a([...i].sort((m,x)=>x.episode-m.episode)):a([...i].filter(m=>m.episode.toString().match(d)))},[i]);return e.jsxs("section",{className:j(g.episodes,{},[s]),children:[e.jsx(M,{cls:r==="old"&&g.rotate,onClick:_,type:"icon",tooltip:r==="new"?"Сначала новые":"Сначала старые",children:e.jsx(le,{})}),e.jsx("input",{type:"number",onChange:c=>f(c)}),e.jsx(ce,{type:n,episodes:l})]})});export{_e as E,xe as T,he as a,me as t,pe as u};
